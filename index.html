<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KCSポータル</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ユーザー名入力モーダル -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <h2>👤 ユーザー名を入力してください</h2>
            <input type="text" id="userNameInput" placeholder="あなたの名前を入力">
            <button id="userNameSubmit" class="btn-primary">開始</button>
        </div>
    </div>

    <!-- 編集用モーダル -->
    <div id="editModal" class="modal" style="display:none;">
        <div class="modal-content edit-modal">
            <span class="close-btn" onclick="closeEditModal()">&times;</span>
            <h2 id="editModalTitle">編集</h2>
            <div id="editModalBody"></div>
        </div>
    </div>

    <!-- ヘッダー -->
    <header>
        <div class="container">
            <h1><i class="fas fa-store"></i> KCSポータル</h1>
            <div class="user-info">
                <span id="currentUserName"></span>
                <button id="changeUserBtn" class="btn-secondary">ユーザー変更</button>
            </div>
        </div>
    </header>

    <!-- タブナビゲーション -->
    <nav class="tab-nav">
        <div class="container">
            <button class="tab-btn active" data-tab="home">
                <i class="fas fa-home"></i> ホーム
            </button>
            <button class="tab-btn" data-tab="shift">
                <i class="fas fa-calendar-alt"></i> シフト
            </button>
            <button class="tab-btn" data-tab="videos">
                <i class="fas fa-video"></i> 動画マニュアル
            </button>
            <button class="tab-btn" data-tab="checklist">
                <i class="fas fa-clipboard-check"></i> チェックシート
            </button>
            <button class="tab-btn" data-tab="ranking">
                <i class="fas fa-trophy"></i> ランキング
            </button>
            <button class="tab-btn" data-tab="admin">
                <i class="fas fa-user-shield"></i> 管理者
            </button>
        </div>
    </nav>

    <!-- メインコンテンツ -->
    <main class="container">
        <!-- ホームタブ -->
        <div id="home" class="tab-content active">
            <h2><i class="fas fa-home"></i> ホーム</h2>
            
            <!-- 口コミリンクセクション -->
            <div class="home-section review-section">
                <h3><i class="fas fa-star"></i> Google口コミ</h3>
                <p>お客様からの評価をチェックしましょう！</p>
                <a href="https://www.google.com/search?q=%E6%9C%A8%E6%9B%B4%E6%B4%A5%E3%82%B3%E3%83%B3%E3%82%BB%E3%83%97%E3%83%88%E3%82%B9%E3%83%88%E3%82%A2" 
                   target="_blank" 
                   class="review-link">
                    <i class="fab fa-google"></i> Google口コミを見る
                </a>
            </div>

            <!-- 管理者連絡事項セクション -->
            <div class="home-section announcements-section">
                <h3><i class="fas fa-bullhorn"></i> 管理者からの連絡事項</h3>
                <div id="announcementsList" class="announcements-list"></div>
            </div>

            <!-- 更新履歴セクション -->
            <div class="home-section updates-section">
                <h3><i class="fas fa-history"></i> 最近の更新</h3>
                <div id="updatesList" class="updates-list"></div>
            </div>
        </div>

        <!-- 動画マニュアルタブ -->
        <div id="videos" class="tab-content">
            <h2><i class="fas fa-video"></i> 動画マニュアル</h2>
            <div id="categoryFilter" class="category-filter"></div>
            <div id="videoList" class="video-grid"></div>
        </div>

        <!-- チェックシートタブ -->
        <div id="checklist" class="tab-content">
            <h2><i class="fas fa-clipboard-check"></i> チェックシート</h2>
            <div class="category-selector">
                <button class="category-btn active" data-category="開店準備">開店準備</button>
                <button class="category-btn" data-category="接客対応">接客対応</button>
                <button class="category-btn" data-category="商品管理">商品管理</button>
                <button class="category-btn" data-category="閉店作業">閉店作業</button>
                <button class="category-btn" data-category="接客・案内">接客・案内</button>
            </div>
            <form id="checklistForm" class="checklist-form">
                <div id="checklistItems"></div>
                <button type="submit" class="btn-primary">送信</button>
            </form>
            <div id="checklistSuccess" class="success-message" style="display:none;">
                ✅ チェックシートを送信しました！
            </div>
        </div>

        <!-- テストタブ -->
        <!-- ランキングタブ -->
        <div id="ranking" class="tab-content">
            <h2><i class="fas fa-trophy"></i> ランキング</h2>
            <div class="ranking-container">
                <div class="ranking-section">
                    <h3><i class="fas fa-video"></i> 動画視聴回数ランキング</h3>
                    <div id="videoRanking" class="ranking-list"></div>
                </div>
            </div>
        </div>

        <!-- シフトタブ -->
        <div id="shift" class="tab-content">
            <h2><i class="fas fa-calendar-alt"></i> シフト</h2>
            
            <!-- 欠員シフトセクション -->
            <div class="shift-section">
                <h3><i class="fas fa-user-plus"></i> 欠員シフト募集</h3>
                <div id="shiftVacanciesList" class="shift-vacancies-list"></div>
            </div>

            <!-- PDFシフト表セクション -->
            <div class="shift-section shift-pdf-section">
                <h3><i class="fas fa-file-pdf"></i> シフト表</h3>
                <div id="shiftPdfLinks" class="shift-pdf-links"></div>
            </div>
        </div>

        <!-- 管理者タブ -->
        <div id="admin" class="tab-content">
            <h2><i class="fas fa-user-shield"></i> 管理者ビュー</h2>
            
            <!-- 編集機能セクション -->
            <div class="admin-tabs">
                <button class="admin-tab-btn active" onclick="switchAdminTab('data')">データ確認</button>
                <button class="admin-tab-btn" onclick="switchAdminTab('announcements')">連絡事項管理</button>
                <button class="admin-tab-btn" onclick="switchAdminTab('shift')">シフト管理</button>
                <button class="admin-tab-btn" onclick="switchAdminTab('videos')">動画管理</button>
                <button class="admin-tab-btn" onclick="switchAdminTab('checklist')">チェック項目管理</button>
            </div>

            <!-- データ確認タブ -->
            <div id="adminData" class="admin-tab-content active">
                <div class="admin-section">
                    <h3><i class="fas fa-clipboard-check"></i> チェックシート回答</h3>
                    <button class="btn-export" onclick="exportChecklistCSV()">
                        <i class="fas fa-download"></i> CSV出力
                    </button>
                    <div id="adminChecklistData" class="data-table"></div>
                </div>

                <div class="admin-section">
                    <h3><i class="fas fa-video"></i> 動画視聴履歴</h3>
                    <button class="btn-export" onclick="exportVideoViewsCSV()">
                        <i class="fas fa-download"></i> CSV出力
                    </button>
                    <div id="adminVideoData" class="data-table"></div>
                </div>
            </div>

            <!-- 連絡事項管理タブ -->
            <div id="adminAnnouncements" class="admin-tab-content">
                <div class="admin-section">
                    <h3><i class="fas fa-bullhorn"></i> 連絡事項管理</h3>
                    <button class="btn-primary" onclick="showAddAnnouncementModal()">
                        <i class="fas fa-plus"></i> 新規連絡事項追加
                    </button>
                    <div id="announcementManagementList" class="management-list"></div>
                </div>
            </div>

            <!-- シフト管理タブ -->
            <div id="adminShift" class="admin-tab-content">
                <div class="admin-section">
                    <h3><i class="fas fa-user-plus"></i> 欠員シフト管理</h3>
                    <button class="btn-primary" onclick="showAddVacancyModal()">
                        <i class="fas fa-plus"></i> 新規欠員シフト追加
                    </button>
                    <div id="vacancyManagementList" class="management-list"></div>
                </div>

                <div class="admin-section">
                    <h3><i class="fas fa-file-pdf"></i> PDFシフト表管理</h3>
                    <button class="btn-primary" onclick="showAddPdfLinkModal()">
                        <i class="fas fa-plus"></i> 新規PDFリンク追加
                    </button>
                    <div id="pdfLinkManagementList" class="management-list"></div>
                </div>
            </div>

            <!-- 動画管理タブ -->
            <div id="adminVideos" class="admin-tab-content">
                <div class="admin-section">
                    <h3><i class="fas fa-video"></i> 動画管理</h3>
                    <button class="btn-primary" onclick="showAddVideoModal()">
                        <i class="fas fa-plus"></i> 新規動画追加
                    </button>
                    <div id="videoManagementList" class="management-list"></div>
                </div>
            </div>

            <!-- チェック項目管理タブ -->
            <div id="adminChecklist" class="admin-tab-content">
                <div class="admin-section">
                    <h3><i class="fas fa-clipboard-list"></i> チェック項目管理</h3>
                    <button class="btn-primary" onclick="showAddChecklistModal()">
                        <i class="fas fa-plus"></i> 新規項目追加
                    </button>
                    <div class="category-filter" style="margin: 20px 0;">
                        <button class="filter-btn active" onclick="filterChecklistManagement('all')">すべて</button>
                        <button class="filter-btn" onclick="filterChecklistManagement('開店準備')">開店準備</button>
                        <button class="filter-btn" onclick="filterChecklistManagement('接客対応')">接客対応</button>
                        <button class="filter-btn" onclick="filterChecklistManagement('商品管理')">商品管理</button>
                        <button class="filter-btn" onclick="filterChecklistManagement('閉店作業')">閉店作業</button>
                        <button class="filter-btn" onclick="filterChecklistManagement('接客・案内')">接客・案内</button>
                    </div>
                    <div id="checklistManagementList" class="management-list"></div>
                </div>
            </div>

            <!-- テスト問題管理タブ -->

        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 KCSポータル</p>
        </div>
    </footer>

    <script src="js/init-data.js"></script>
    <script src="js/app.js"></script>
    <script src="js/shift.js"></script>
</body>
</html>
